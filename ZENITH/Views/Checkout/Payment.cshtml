@model ZENITH.ViewModels.PaymentViewModel
<main class="checkout-page" data-item-count="@Model.ItemCount" data-line-count="@Model.Items.Count" data-subtotal="@Model.Subtotal" data-address-id="@Model.SelectedAddress?.AddressId">
    <div class="container">
        <!-- Search bar -->
        <div class="checkout-container">
            <div class="search-bar d-none d-md-flex">
                <input type="text" name="" id="" placeholder="Tìm sản phẩm" class="search-bar__input" />
                <button class="search-bar__submit">
                    <img src="~/image/icons/search.svg" alt="" class="search-bar__icon icon" />
                </button>
            </div>
        </div>

        <!-- Breadcrumbs -->
        <div class="checkout-container">
            <ul class="breadcrumbs checkout-page__breadcrumbs">
                <li>
                    <a asp-controller="Home" asp-action="Index" class="breadcrumbs__link">
                        Trang chủ
                        <img src="~/image/icons/arrow-right.svg" alt="" />
                    </a>
                </li>
                <li>
                    <a asp-controller="Checkout" asp-action="Index" class="breadcrumbs__link">
                        Giỏ hàng
                        <img src="~/image/icons/arrow-right.svg" alt="" />
                    </a>
                </li>
                <li>
                    <a asp-controller="Checkout" asp-action="Shipping" class="breadcrumbs__link">
                        Vận chuyển
                        <img src="~/image/icons/arrow-right.svg" alt="" />
                    </a>
                </li>
                <li>
                    <a href="#" class="breadcrumbs__link breadcrumbs__link--current">Thanh toán</a>
                </li>
            </ul>
        </div>

        <!-- Checkout content -->
        <div class="checkout-container">
            <div class="row gy-xl-3">
                <div class="col-8 col-xl-8 col-lg-12">
                    <div class="cart-info">
                        <div class="cart-info__top">
                            <h2 class="cart-info__heading cart-info__heading--lv2">1. Thông tin giao hàng</h2>
                            <a class="cart-info__edit-btn" asp-controller="Checkout" asp-action="Shipping">
                                <img class="icon" src="~/image/icons/edit.svg" alt="" />
                                Sửa
                            </a>
                        </div>

                        <!-- Payment item 1 -->
                        <article class="payment-item">
                            <div class="payment-item__info">
                                <h3 class="payment-item__title">@Model.SelectedAddress?.FullName</h3>
                                <p class="payment-item__desc">@Model.SelectedAddress?.DisplayText</p>
                            </div>
                        </article>

                        <!-- Payment item 2 -->
                        <article class="payment-item">
                            <div class="payment-item__info">
                                <h3 class="payment-item__title">Chi tiết sản phẩm</h3>
                                <p class="payment-item__desc">@Model.ItemCount sản phẩm</p>
                            </div>
                            <a asp-controller="Checkout" asp-action="Shipping" class="payment-item__detail">Xem chi tiết</a>
                        </article>
                    </div>

                    <div class="cart-info">
                        <h2 class="cart-info__heading cart-info__heading--lv2">2. Phương thức vận chuyển</h2>
                        <div class="cart-info__separate"></div>
                        <h3 class="cart-info__sub-heading">Các phương thức vận chuyển khả dụng</h3>

                        <!-- Payment item 3 -->
                        <label>
                            <article class="payment-item payment-item--pointer">
                                <img src="~/image/payment/delivery-1.png"
                                     alt=""
                                     class="payment-item__thumb" />
                                <div class="payment-item__content">
                                    <div class="payment-item__info">
                                        <h3 class="payment-item__title">Giao hàng tiêu chuẩn</h3>
                                        <p class="payment-item__desc payment-item__desc--low">Thời gian: 2-3 ngày làm việc</p>
                                    </div>

                                    <span class="cart-info__checkbox payment-item__checkbox">
                                        <input type="radio"
                                               name="delivery-method"
                                               checked
                                               data-rate="15000"
                                               class="cart-info__checkbox-input payment-item__checkbox-input" />
                                        <span class="payment-item__cost">0 VND</span>
                                    </span>
                                </div>
                            </article>
                        </label>

                        <!-- Payment item 4 -->
                        <label>
                            <article class="payment-item payment-item--pointer">
                                <img src="~/image/payment/delivery-2.png"
                                     alt=""
                                     class="payment-item__thumb" />
                                <div class="payment-item__content">
                                    <div class="payment-item__info">
                                        <h3 class="payment-item__title">Giao hàng nhanh</h3>
                                        <p class="payment-item__desc payment-item__desc--low">Thời gian: 1-2 ngày làm việc</p>
                                    </div>

                                    <span class="cart-info__checkbox payment-item__checkbox">
                                        <input type="radio"
                                               name="delivery-method"
                                               data-rate="30000"
                                               class="cart-info__checkbox-input payment-item__checkbox-input" />
                                        <span class="payment-item__cost">0 VND</span>
                                    </span>
                                </div>
                            </article>
                        </label>
                    </div>
                </div>
                <div class="col-4 col-xl-4 col-lg-12">
                    <div class="cart-info">
                        <h2 class="cart-info__heading cart-info__heading--lv2">Thông tin thanh toán</h2>
                        <div class="cart-info__row">
                            <span>Phương thức thanh toán</span>
                            <span class="cart-info__sub-label">Tiền mặt khi nhận hàng</span>
                        </div>
                        <div class="cart-info__row">
                            <span>Tổng số <span class="cart-info__sub-label">(sản phẩm)</span></span>
                            <span>@Model.ItemCount</span>
                        </div>
                        <div class="cart-info__row">
                            <span>Tổng cộng</span>
                            <span id="js-pay-subtotal">@Model.SubtotalFormatted</span>
                        </div>
                        <div class="cart-info__row">
                            <span>Phí vận chuyển</span>
                            <span id="js-pay-shipping">@Model.ShippingFormatted</span>
                        </div>
                        <div class="cart-info__separate"></div>
                        <div class="cart-info__row">
                            <span>Tổng dự kiến</span>
                            <span id="js-pay-total">@Model.TotalFormatted</span>
                        </div>
                        <a href="#" class="cart-info__next-btn btn btn--primary btn--rounded" id="js-pay-submit-btn">Thanh toán @Model.TotalFormatted</a>
                    </div>
                    <form method="post" style="display:none">
                        @Html.AntiForgeryToken()
                    </form>
                    
                </div>
            </div>
        </div>
    </div>
</main>


<!-- Modal: confirm remove shopping cart item -->
<div id="delete-confirm" class="modal modal--small hide">
    <div class="modal__content">
        <p class="modal__text">Do you want to remove this item from shopping cart?</p>
        <div class="modal__bottom">
            <button class="btn btn--small btn--outline modal__btn js-toggle" toggle-target="#delete-confirm">
                Cancel
            </button>
            <button class="btn btn--small btn--danger btn--primary modal__btn btn--no-margin js-toggle"
                    toggle-target="#delete-confirm">
                Delete
            </button>
        </div>
    </div>
    <div class="modal__overlay js-toggle" toggle-target="#delete-confirm"></div>
</div>

<!-- Modal: address new shipping address -->
<div id="add-new-address" class="modal hide" style="--content-width: 650px">
    <div class="modal__content">
        <form action="" class="form">
            <h2 class="modal__heading">Add new shipping address</h2>
            <div class="modal__body">
                <div class="form__row">
                    <div class="form__group">
                        <label for="name" class="form__label form__label--small">Name</label>
                        <div class="form__text-input form__text-input--small">
                            <input type="text"
                                   name="name"
                                   id="name"
                                   placeholder="Name"
                                   class="form__input"
                                   required
                                   minlength="2" />
                            <img src="./assets/icons/form-error.svg" alt="" class="form__input-icon-error" />
                        </div>
                        <p class="form__error">Name must be at least 2 characters</p>
                    </div>
                    <div class="form__group">
                        <label for="phone" class="form__label form__label--small">Phone</label>
                        <div class="form__text-input form__text-input--small">
                            <input type="tel"
                                   name="phone"
                                   id="phone"
                                   placeholder="Phone"
                                   class="form__input"
                                   required
                                   minlength="10" />
                            <img src="./assets/icons/form-error.svg" alt="" class="form__input-icon-error" />
                        </div>
                        <p class="form__error">Phone must be at least 10 characters</p>
                    </div>
                </div>
                <div class="form__group">
                    <label for="address" class="form__label form__label--small">Address</label>
                    <div class="form__text-area">
                        <textarea name="address"
                                  id="address"
                                  placeholder="Address (Area and street)"
                                  class="form__text-area-input"
                                  required></textarea>
                        <img src="./assets/icons/form-error.svg" alt="" class="form__input-icon-error" />
                    </div>
                    <p class="form__error">Address not empty</p>
                </div>
                <div class="form__group">
                    <label for="city" class="form__label form__label--small">City/District/Town</label>
                    <div class="form__text-input form__text-input--small">
                        <input type="text"
                               name=""
                               placeholder="City/District/Town"
                               id="city"
                               class="form__input js-toggle"
                               toggle-target="#city-dialog" />
                        <img src="./assets/icons/form-error.svg" alt="" class="form__input-icon-error" />

                        <!-- Select dialog -->
                        <div id="city-dialog" class="form__select-dialog hide">
                            <h2 class="form__dialog-heading d-none d-sm-block">City/District/Town</h2>
                            <button class="form__close-dialog d-none d-sm-block js-toggle"
                                    toggle-target="#city-dialog">
                                &times
                            </button>
                            <div class="form__search">
                                <input type="text" placeholder="Search" class="form__search-input" />
                                <img src="./assets/icons/search.svg" alt="" class="form__search-icon icon" />
                            </div>
                            <ul class="form__options-list">
                                <li class="form__option">Ha Noi</li>
                                <li class="form__option form__option--current">Ho Chi Minh</li>
                                <li class="form__option">Da Nang</li>
                                <li class="form__option">Ha Noi</li>
                                <li class="form__option">Ho Chi Minh</li>
                                <li class="form__option">Da Nang</li>
                                <li class="form__option">Ha Noi</li>
                                <li class="form__option">Ho Chi Minh</li>
                                <li class="form__option">Da Nang</li>
                                <li class="form__option">Ha Noi</li>
                                <li class="form__option">Ho Chi Minh</li>
                                <li class="form__option">Da Nang</li>
                                <li class="form__option">Ha Noi</li>
                                <li class="form__option">Ho Chi Minh</li>
                                <li class="form__option">Da Nang</li>
                                <li class="form__option">Ha Noi</li>
                                <li class="form__option">Ho Chi Minh</li>
                                <li class="form__option">Da Nang</li>
                                <li class="form__option">Ha Noi</li>
                                <li class="form__option">Ho Chi Minh</li>
                                <li class="form__option">Da Nang</li>
                                <li class="form__option">Ha Noi</li>
                                <li class="form__option">Ho Chi Minh</li>
                                <li class="form__option">Da Nang</li>
                                <li class="form__option">Ha Noi</li>
                                <li class="form__option">Ho Chi Minh</li>
                                <li class="form__option">Da Nang</li>
                                <li class="form__option">Ha Noi</li>
                                <li class="form__option">Ho Chi Minh</li>
                                <li class="form__option">Da Nang</li>
                                <li class="form__option">Ha Noi</li>
                                <li class="form__option">Ho Chi Minh</li>
                                <li class="form__option">Da Nang</li>
                                <li class="form__option">Ha Noi</li>
                                <li class="form__option">Ho Chi Minh</li>
                                <li class="form__option">Da Nang</li>
                            </ul>
                        </div>
                    </div>
                    <p class="form__error">Phone must be at least 11 characters</p>
                </div>
                <div class="form__group form__group--inline">
                    <label class="form__checkbox">
                        <input type="checkbox" name="" id="" class="form__checkbox-input d-none" />
                        <span class="form__checkbox-label">Set as default address</span>
                    </label>
                </div>
            </div>
            <div class="modal__bottom">
                <button class="btn btn--small btn--text modal__btn js-toggle" toggle-target="#add-new-address">
                    Cancel
                </button>
                <button class="btn btn--small btn--primary modal__btn btn--no-margin">Create</button>
            </div>
        </form>
    </div>
    <div class="modal__overlay"></div>
</div>
